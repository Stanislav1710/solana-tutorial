# Урок 3 — Devnet / Testnet / Mainnet: когда и зачем использовать каждую сеть

---

## 1. Введение

В экосистеме Solana существует несколько **сетей (clusters)** — это независимые копии блокчейна, работающие по одним и тем же правилам, но для разных целей.  
Можно представить их как три «миры», где:
- одни служат для обучения и тестирования (без риска);
- другие — для публичных релизов и реальных денег.

Каждая сеть Solana функционирует как отдельный блокчейн со своей историей транзакций, балансами и смарт-контрактами.

---

## 2. Основные сети Solana

| Сеть | Назначение | URL RPC | Особенности |
|------|-------------|---------|--------------|
| **Devnet** | Учебная и тестовая среда для разработчиков | `https://api.devnet.solana.com` | Бесплатные токены (airdrop), простая регистрация, данные могут сбрасываться. |
| **Testnet** | Для нагрузочного и системного тестирования | `https://api.testnet.solana.com` | Близка к mainnet, без airdrop, нестабильна, часто обновляется. |
| **Mainnet-Beta** | Основная рабочая сеть | `https://api.mainnet-beta.solana.com` | Реальные транзакции, настоящие SOL, стабильность и безопасность. |

---

### 2.1. Devnet

Devnet — это «песочница» для разработчиков.  
Здесь можно бесплатно получать тестовые SOL и проверять работу программ.

- Идеально подходит для обучения и экспериментов.
- Балансы и аккаунты могут быть сброшены при обновлениях сети.
- Используется для тестирования новых идей без риска потери средств.

Пример: разработчик хочет протестировать перевод токенов — Devnet идеален для этого.

---

### 2.2. Testnet

Testnet — это техническая сеть, где Solana Labs проверяет обновления, протоколы и производительность.

- Не рекомендуется для пользовательских тестов — данные часто сбрасываются.
- Используется командами Solana для внутренних проверок.
- Позволяет оценить производительность и масштабируемость.

---

### 2.3. Mainnet-Beta

Mainnet — это «настоящая» сеть, где происходят реальные транзакции и хранятся реальные SOL.

- Все токены имеют реальную стоимость.
- Высокая стабильность и защита от сбоев.
- Все программы и токены, развёрнутые здесь, публично видимы.

Mainnet используется для продакшн-приложений, бирж, NFT-маркетплейсов, DeFi и других публичных решений.

---

## 3. Сравнение сетей

| Критерий | Devnet | Testnet | Mainnet-Beta |
|-----------|---------|----------|---------------|
| **Доступность** | Открыта для всех | Ограничена | Открыта для всех |
| **Стоимость транзакций** | Бесплатно | Бесплатно | Реальные SOL |
| **Надёжность данных** | Средняя (возможны сбросы) | Низкая (частые обновления) | Высокая |
| **Цель использования** | Обучение, тестирование | Нагрузочные тесты | Production-приложения |
| **Airdrop (бесплатные SOL)** | Да | Нет | Нет |
| **Скорость и стабильность** | Высокая | Переменная | Максимальная |

---

## 4. Примеры подключения к различным сетям

В примере ниже мы подключаемся к разным сетям и сравниваем данные о текущем блоке и балансе аккаунта.
Используем код из [`examples/Python/L3-Clusters.py`](../examples/Python/L3-Clusters.py):
```python
from solana.rpc.api import Client
from solders.pubkey import Pubkey

# Адрес тестового аккаунта (System Program)
address = Pubkey.from_string("11111111111111111111111111111111")

# Подключения к сетям
client_dev = Client("https://api.devnet.solana.com")
client_test = Client("https://api.testnet.solana.com")
client_main = Client("https://api.mainnet-beta.solana.com")

# Получаем информацию о слотах (высота цепочки)
slot_dev = client_dev.get_slot().value
slot_test = client_test.get_slot().value
slot_main = client_main.get_slot().value

print(f"Devnet slot: {slot_dev}")
print(f"Testnet slot: {slot_test}")
print(f"Mainnet slot: {slot_main}")

# Пример запроса баланса (в lamports)
balance_dev = client_dev.get_balance(address).value
balance_test = client_test.get_balance(address).value
balance_main = client_main.get_balance(address).value

print(f"Devnet balance: {balance_dev} lamports")
print(f"Testnet balance: {balance_test} lamports")
print(f"Mainnet balance: {balance_main} lamports")
```

---

### Результат (пример вывода)
```
Devnet slot: 416331490
Testnet slot: 365331939
Mainnet slot: 375057036
Devnet balance: 1 lamports
Testnet balance: 1 lamports
Mainnet balance: 1 lamports
```

> Значения слотов и балансов могут отличаться, потому что это **разные сети**, не синхронизированные между собой.

---

## 5. Важное замечание

- Аккаунты, созданные в Devnet, **не существуют в Mainnet**.  
  Даже если адрес одинаковый, данные и баланс будут разными.
- Программы (смарт-контракты) нужно **разворачивать отдельно для каждой сети**.
- Рекомендация: никогда не используйте **реальные приватные ключи** в Devnet или Testnet.

---

## 6. Вопросы для самопроверки

1. Чем Devnet отличается от Testnet?
2. Почему нельзя копировать транзакции между сетями?
3. Что произойдёт, если в Testnet выполнить код с реальным кошельком из Mainnet?
4. Где безопаснее всего тестировать новый смарт-контракт?
5. Почему Devnet подходит для обучения, а не для production?

---

## 7. Навигация

[← Урок 2 — Основные сущности: аккаунты, программы, транзакции, инструкции](Lesson_2.md)  
[→ Урок 4 — RPC и WebSocket — как клиент общается с цепочкой](Lesson_4.md)

