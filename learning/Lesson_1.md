# Урок 1 — Что такое Solana и почему она особенная

---

## 1. Введение

**Solana** — это блокчейн-платформа, созданная для масштабирования без потери безопасности и децентрализации.  
Её разработал Anatoly Yakovenko в 2017 году, поставив цель сделать блокчейн таким же быстрым и надёжным, как современные распределённые базы данных.  
Сеть запущена в 2020 году и стала одной из самых производительных благодаря уникальной комбинации технологий — **Proof of History (PoH)**, **Proof of Stake (PoS)** и **Sealevel**.

---

## 2. Ключевая идея

Solana решает проблему, из-за которой классические блокчейны масштабируются плохо:  
все узлы должны согласовать порядок транзакций.

В Solana порядок определяется заранее — через криптографическую временную метку (**Proof of History**).  
Это даёт возможность исполнять транзакции параллельно (**Sealevel**) и снижает задержки до миллисекунд.

---

## 3. Архитектура Solana

### 3.1. Основные элементы сети

| Компонент | Назначение | Краткое описание |
|------------|-------------|------------------|
| **Client** | Пользователь или dApp | Создаёт транзакции и отправляет их через RPC |
| **RPC Node** | Входной узел сети | Принимает транзакции от клиентов и пересылает валидаторам |
| **Validator** | Узел-участник консенсуса | Проверяет подписи, применяет инструкции, формирует блоки |
| **Leader Scheduler** | Расписание валидаторов | Определяет, кто и когда создаёт блок |
| **Ledger** | Журнал событий сети | Неизменяемая история блоков (хранится у всех валидаторов) |

Архитектурно сеть можно представить так:

```
Клиент (кошелёк, dApp)
     │
     ▼
  RPC-узел  →  Валидатор-лидер  →  Кластер валидаторов
                     │                   │
                     ▼                   ▼
             Proof of History     Распространение блока (Turbine)
```

---

## 4. Proof of History (PoH)

### 4.1. Что это

PoH — это последовательность криптографических хэшей, каждая из которых зависит от предыдущей.  
Каждый хэш выступает **временной меткой**, доказывающей, что определённый интервал времени прошёл.

Примерно:
```
hash₁ = SHA256(seed)
hash₂ = SHA256(hash₁)
hash₃ = SHA256(hash₂)
...
```
Вставляя события (транзакции) в эту цепочку, мы можем доказать, *в каком порядке* они произошли, не прибегая к внешним часам.

### 4.2. Почему это важно

- У узлов нет необходимости синхронизировать системное время.  
- Порядок транзакций заранее известен всем.  
- Валидаторы могут выполнять проверку **асинхронно**.

---

## 5. Sealevel — параллельное выполнение

Обычные блокчейны выполняют транзакции по одной:  
даже если они не конфликтуют, следующая ждёт предыдущую.  

Solana анализирует каждую транзакцию: какие аккаунты она читает и какие изменяет.  
Если два набора аккаунтов не пересекаются — транзакции можно исполнять **параллельно**.  

Это делает сеть способной обрабатывать **тысячи транзакций в секунду** без шардирования.

---

## 6. Proof of Stake и валидаторы

Solana использует гибрид:  
- **PoH** отвечает за порядок;  
- **PoS** — за консенсус и безопасность.

Валидаторы вносят залог (**stake**) в SOL.  
Если они действуют недобросовестно — stake сгорает (**slashing**).  
Так формируется экономическая безопасность сети.

---

## 7. Как данные устроены в Solana

| Объект | Назначение | Пример |
|---------|-------------|--------|
| **Account** | Контейнер данных. Хранит lamports (баланс) и bytes данных программы. | Баланс пользователя, состояние токена |
| **Program** | Исполняемый код (аналог смарт-контракта). | SPL Token Program |
| **Instruction** | Команда, передаваемая программе. | transfer(), mint_to() |
| **Transaction** | Набор инструкций + подписи. | «Перевести 1 SOL» |
| **Block** | Набор транзакций, включённых валидатором-лидером. | Часть ledger |

---

## 8. Централизованная БД vs Solana

| Критерий | Централизованная БД | Solana |
|-----------|----------------------|---------|
| Контроль | Один оператор | Десятки тысяч валидаторов |
| Консистентность | Гарантируется сервером | Подтверждается консенсусом |
| История изменений | Можно переписать | Неизменяема (ledger) |
| Скорость | Мгновенная локально | Миллисекунды при глобальном согласовании |
| Доверие | Требуется доверие к администратору | Криптографические подписи вместо доверия |

---

## 9. Практическая часть

В данном уроке мы будем подключаться к сети Solana Devnet.  
`
Python - 
`
Используем код из [`examples/Python/L1-Connect.py`](../examples/Python/L1-Connect.py):
```python
from solana.rpc.api import Client


client = Client("https://api.devnet.solana.com")
version = client.get_version().value.solana_core
print("Devnet node version:", version)

```

Если вы видите ответ в виде `Devnet node version: 3.0.6` — соединение успешно.


---

## 10. Что важно усвоить

1. **Proof of History** задаёт порядок событий без синхронизации узлов.  
2. **Sealevel** позволяет исполнять независимые транзакции параллельно.  
3. **Validator** — ключевая сущность, которая проверяет подписи и формирует блоки.  
4. **Account** — универсальный контейнер данных.  
5. **Solana** масштабируется без шардинга благодаря архитектуре PoH + Sealevel.  

---

## 11. Вопросы для самопроверки

1. Почему Solana не требует синхронизации часов между узлами?  
2. В чём преимущество PoH перед традиционным временем блока?  
3. Как Sealevel определяет, что транзакции можно выполнять параллельно?  
4. Почему валидаторы должны делать stake?  
5. Чем Solana принципиально отличается от традиционной БД?

---

[→ Урок 2 — Основные сущности: аккаунты, программы, транзакции, инструкции](Lesson_2.md)

