# Урок 2. Создание кошелька в сети Solana — подробный практикум

**Цель урока:** понять, что такое кошелёк в Solana и как создать новый рабочий кошелёк (mnemonic / seed → keypair), сохранить его в файл и безопасно с ним работать.

> Этот урок рассчитан на новичков: пошагово и с объяснениями терминов.

---

## 1) Немного теории — что такое "кошелёк" в Solana

- **Публичный ключ (Public Key / address)** — публичный адрес кошелька, который вы даёте другим для получения средств. Пример: `5oEYV...`.
- **Приватный ключ (Private Key)** — секретная информация, с помощью которой вы подписываете транзакции. Никому не показывайте.
- **Seed / мнемоническая фраза (mnemonic)** — человекочитаемая фраза (обычно 12 или 24 слова), из которой по стандартам BIP‑39/BIP‑44 можно восстановить приватный ключ(и).
- **Lamports** — минимальная единица SOL (1 SOL = 1_000_000_000 lamports).

**Почему важно:** mnemonics и private keys дают полный контроль над средствами. Храните их в надёжном месте (аппаратный кошелёк, зашифрованное хранилище).

---

## 2) Что делает `examples/Wallet.py` (коротко)

В этом уроке мы будем использовать код из [`examples/Wallet.py`](../examples/Wallet.py) (у тебя в проекте он может называться `Wallet.py`), где реализованы две полезные функции:

- `create_wallet(save_to_file=False, filename="wallet.json", words_number=12, hidden_data=True)` — генерирует мнемонику и keypair, может сохранять в JSON файл.
В этом уроке мы подробнее изучим эту функцию!
- `load_wallet(method: str, value, network="devnet")` — загружает кошелёк по мнемонике, base58 ключу или из файла. Данная функция будет подробно описана в следующем нашем уроке [`learning/lesson3.md`](../learning/lesson3.md).


---

## 3) Подготовка: виртуальное окружение и зависимости
(Если ты уже сделал это в предыдущем уроке — переходи к шагу 4.)

```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# Linux/Mac
source .venv/bin/activate

pip install -r requirements.txt
```

`requirements.txt` должен содержать минимум: `solders`, `solana`, `bip_utils`.

---

## 4) Генерация нового кошелька — пошагово

### Вариант A — запустить прямо как скрипт
```bash
python examples/Wallet.py
```
Ожидаемый вывод (пример):
```
Wallet: GsErFF......7ENdoc3
Secret key (base58): 4ksR.....coEBoQjpWNTZiQ3VFUG.....3gb4u34N2AXSot.....9UpT4bfb1oSiW1Q
Mnemonic (12 words): word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11 word12 
```

### Вариант B — вызвать функцию из интерпретатора Python
```bash
python -i
>>> from examples.Wallet import create_wallet
>>> w = create_wallet(save_to_file=True, filename="wallet.json", words_number=12, hidden_data=False)
>>> print(w["public_key"])
```
Пройдемся по параметрам по порядку:

**save_to_file:** Этот параметр предоставляет возможность сохранять кошелек в файл.

**filename:** Имя файла, в котором будет записана информация о Вашем кошельке.

**words_number:** Параметр, который явно указывает на тип мнемоники (12 или 24 слов).

**hidden_data:** Выводить ли данные кошелька в консоль при выполнении данной функции.


**Что будет в `wallet.json`** (пример):
```json
{
  "public_key": "GsErFF......7ENdoc3",
  "secret_key_base58": "4ksR.....coEBoQjpWNTZiQ3VFUG.....3gb4u34N2AXSot.....9UpT4bfb1oSiW1Q",
  "mnemonic": "word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11 word12"
}
```

---

## 5) Рекомендации по безопасности

- Никогда не коммить `wallet.json` в публичный репозиторий. Добавь `wallet.json` в `.gitignore`.
- Если нужно хранить мнемонику на диске — зашифруй файл (например, с использованием GPG или с помощью Python-библиотеки для симметричного шифрования).
- Для работы с реальной ценностью — используйте аппаратные кошельки (Ledger, Solflare Ledger, и т.д.).

---

## 6) Частые ошибки и как проверять

- **"address mismatch"** — если при восстановлении по мнемонике адрес отличается от ожидаемого, проверь путь деривации (должен быть `m/44'/501'/0'/0'` для Solana) и использование SLIP-0010 (Ed25519). Если ты используешь `bip_utils`, обычно это уже настроено правильно.
- **"ModuleNotFoundError"** — установи зависимости, активируй виртуальное окружение.
- **"Keypair.from_seed" ошибки** — убедись, что передаёшь ровно 32 байта seed.

---

✅ Получив файл со всеми данными кошелька, можно Вас поздравить! Вы успешно создали кошелёк в сети Solana!

[`Предыдущий урок`](../learning/lesson1.md) | [`Следующий урок`](../learning/lesson3.md)
